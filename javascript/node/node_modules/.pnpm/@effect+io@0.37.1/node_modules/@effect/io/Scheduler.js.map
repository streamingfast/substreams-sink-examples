{"version":3,"file":"Scheduler.js","names":["_Global","require","PriorityBuckets","constructor","buckets","scheduleTask","task","priority","bucket","undefined","index","length","push","newBuckets","i","exports","MixedScheduler","maxNextTickBeforeTimer","running","tasks","starveInternal","depth","_","toRun","starve","setTimeout","Promise","resolve","then","defaultScheduler","globalValue","Symbol","for","SyncScheduler","deferred","flush","ControlledScheduler","step","makeMatrix","record","sort","p0","p1","scheduler","make","makeBatched","callback","tasksToRun","timer","ms","timerBatched"],"sources":["./src/Scheduler.ts"],"sourcesContent":[null],"mappings":";;;;;;AAIA,IAAAA,OAAA,gBAAAC,OAAA;AAJA;;;;AAoBA;;;;AAIM,MAAOC,eAAe;EAA5BC,YAAA;IACE;;;IAGO,KAAAC,OAAO,GAA8B,EAAE;EA4BhD;EA3BE;;;EAGAC,YAAYA,CAACC,IAAO,EAAEC,QAAgB;IACpC,IAAIC,MAAM,GAAmCC,SAAS;IACtD,IAAIC,KAAa;IACjB,KAAKA,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACN,OAAO,CAACO,MAAM,EAAED,KAAK,EAAE,EAAE;MACpD,IAAI,IAAI,CAACN,OAAO,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAIH,QAAQ,EAAE;QACtCC,MAAM,GAAG,IAAI,CAACJ,OAAO,CAACM,KAAK,CAAC;OAC7B,MAAM;QACL;;;IAGJ,IAAIF,MAAM,EAAE;MACVA,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAACN,IAAI,CAAC;KACrB,MAAM;MACL,MAAMO,UAAU,GAA8B,EAAE;MAChD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,KAAK,EAAEI,CAAC,EAAE,EAAE;QAC9BD,UAAU,CAACD,IAAI,CAAC,IAAI,CAACR,OAAO,CAACU,CAAC,CAAC,CAAC;;MAElCD,UAAU,CAACD,IAAI,CAAC,CAACL,QAAQ,EAAE,CAACD,IAAI,CAAC,CAAC,CAAC;MACnC,KAAK,IAAIQ,CAAC,GAAGJ,KAAK,EAAEI,CAAC,GAAG,IAAI,CAACV,OAAO,CAACO,MAAM,EAAEG,CAAC,EAAE,EAAE;QAChDD,UAAU,CAACD,IAAI,CAAC,IAAI,CAACR,OAAO,CAACU,CAAC,CAAC,CAAC;;MAElC,IAAI,CAACV,OAAO,GAAGS,UAAU;;EAE7B;;AAGF;;;;AAAAE,OAAA,CAAAb,eAAA,GAAAA,eAAA;AAIM,MAAOc,cAAc;EAUzBb;EACE;;;EAGSc,sBAA8B;IAA9B,KAAAA,sBAAsB,GAAtBA,sBAAsB;IAbjC;;;IAGA,KAAAC,OAAO,GAAG,KAAK;IACf;;;IAGA,KAAAC,KAAK,GAAG,IAAIjB,eAAe,EAAE;EAO1B;EAEH;;;EAGQkB,cAAcA,CAACC,KAAa;IAClC,MAAMF,KAAK,GAAG,IAAI,CAACA,KAAK,CAACf,OAAO;IAChC,IAAI,CAACe,KAAK,CAACf,OAAO,GAAG,EAAE;IACvB,KAAK,MAAM,CAACkB,CAAC,EAAEC,KAAK,CAAC,IAAIJ,KAAK,EAAE;MAC9B,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGS,KAAK,CAACZ,MAAM,EAAEG,CAAC,EAAE,EAAE;QACrCS,KAAK,CAACT,CAAC,CAAC,EAAE;;;IAGd,IAAI,IAAI,CAACK,KAAK,CAACf,OAAO,CAACO,MAAM,KAAK,CAAC,EAAE;MACnC,IAAI,CAACO,OAAO,GAAG,KAAK;KACrB,MAAM;MACL,IAAI,CAACM,MAAM,CAACH,KAAK,CAAC;;EAEtB;EAEA;;;EAGQG,MAAMA,CAACH,KAAK,GAAG,CAAC;IACtB,IAAIA,KAAK,IAAI,IAAI,CAACJ,sBAAsB,EAAE;MACxCQ,UAAU,CAAC,MAAM,IAAI,CAACL,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KAC5C,MAAM;MACLM,OAAO,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM,IAAI,CAACR,cAAc,CAACC,KAAK,GAAG,CAAC,CAAC,CAAC;;EAEtE;EAEA;;;EAGAhB,YAAYA,CAACC,IAAU,EAAEC,QAAgB;IACvC,IAAI,CAACY,KAAK,CAACd,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;IACvC,IAAI,CAAC,IAAI,CAACW,OAAO,EAAE;MACjB,IAAI,CAACA,OAAO,GAAG,IAAI;MACnB,IAAI,CAACM,MAAM,EAAE;;EAEjB;;AAGF;;;;AAAAT,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAIO,MAAMa,gBAAgB,gBAAc,IAAAC,mBAAW,gBACpDC,MAAM,CAACC,GAAG,CAAC,uCAAuC,CAAC,EACnD,MAAM,IAAIhB,cAAc,CAAC,IAAI,CAAC,CAC/B;AAED;;;;AAAAD,OAAA,CAAAc,gBAAA,GAAAA,gBAAA;AAIM,MAAOI,aAAa;EAA1B9B,YAAA;IACE;;;IAGA,KAAAgB,KAAK,GAAG,IAAIjB,eAAe,EAAE;IAE7B;;;IAGA,KAAAgC,QAAQ,GAAG,KAAK;EA4BlB;EA1BE;;;EAGA7B,YAAYA,CAACC,IAAU,EAAEC,QAAgB;IACvC,IAAI,IAAI,CAAC2B,QAAQ,EAAE;MACjBL,gBAAgB,CAACxB,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;KAC9C,MAAM;MACL,IAAI,CAACY,KAAK,CAACd,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;;EAE3C;EAEA;;;EAGA4B,KAAKA,CAAA;IACH,OAAO,IAAI,CAAChB,KAAK,CAACf,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;MACpC,MAAMQ,KAAK,GAAG,IAAI,CAACA,KAAK,CAACf,OAAO;MAChC,IAAI,CAACe,KAAK,CAACf,OAAO,GAAG,EAAE;MACvB,KAAK,MAAM,CAACkB,CAAC,EAAEC,KAAK,CAAC,IAAIJ,KAAK,EAAE;QAC9B,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGS,KAAK,CAACZ,MAAM,EAAEG,CAAC,EAAE,EAAE;UACrCS,KAAK,CAACT,CAAC,CAAC,EAAE;;;;IAIhB,IAAI,CAACoB,QAAQ,GAAG,IAAI;EACtB;;AAGF;;;;AAAAnB,OAAA,CAAAkB,aAAA,GAAAA,aAAA;AAIM,MAAOG,mBAAmB;EAAhCjC,YAAA;IACE;;;IAGA,KAAAgB,KAAK,GAAG,IAAIjB,eAAe,EAAE;IAE7B;;;IAGA,KAAAgC,QAAQ,GAAG,KAAK;EAyBlB;EAvBE;;;EAGA7B,YAAYA,CAACC,IAAU,EAAEC,QAAgB;IACvC,IAAI,IAAI,CAAC2B,QAAQ,EAAE;MACjBL,gBAAgB,CAACxB,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;KAC9C,MAAM;MACL,IAAI,CAACY,KAAK,CAACd,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;;EAE3C;EAEA;;;EAGA8B,IAAIA,CAAA;IACF,MAAMlB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACf,OAAO;IAChC,IAAI,CAACe,KAAK,CAACf,OAAO,GAAG,EAAE;IACvB,KAAK,MAAM,CAACkB,CAAC,EAAEC,KAAK,CAAC,IAAIJ,KAAK,EAAE;MAC9B,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGS,KAAK,CAACZ,MAAM,EAAEG,CAAC,EAAE,EAAE;QACrCS,KAAK,CAACT,CAAC,CAAC,EAAE;;;EAGhB;;AAGF;;;;AAAAC,OAAA,CAAAqB,mBAAA,GAAAA,mBAAA;AAIO,MAAME,UAAU,GAAGA,CAAC,GAAGC,MAAkC,KAAe;EAC7E,MAAM7B,KAAK,GAAG6B,MAAM,CAACC,IAAI,CAAC,CAAC,CAACC,EAAE,CAAC,EAAE,CAACC,EAAE,CAAC,KAAKD,EAAE,GAAGC,EAAE,GAAG,CAAC,CAAC,GAAGD,EAAE,GAAGC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;EACzE,OAAO;IACLrC,YAAYA,CAACC,IAAI,EAAEC,QAAQ;MACzB,IAAIoC,SAAS,GAA0BlC,SAAS;MAChD,KAAK,MAAMK,CAAC,IAAIJ,KAAK,EAAE;QACrB,IAAIH,QAAQ,IAAIO,CAAC,CAAC,CAAC,CAAC,EAAE;UACpB6B,SAAS,GAAG7B,CAAC,CAAC,CAAC,CAAC;SACjB,MAAM;UACL,OAAO,CAAC6B,SAAS,IAAId,gBAAgB,EAAExB,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;;;MAGvE,OAAO,CAACoC,SAAS,IAAId,gBAAgB,EAAExB,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;IACrE;GACD;AACH,CAAC;AAED;;;;AAAAQ,OAAA,CAAAuB,UAAA,GAAAA,UAAA;AAIO,MAAMM,IAAI,GAAIvC,YAAuC,KAAiB;EAAEA;AAAY,CAAE,CAAC;AAE9F;;;;AAAAU,OAAA,CAAA6B,IAAA,GAAAA,IAAA;AAIO,MAAMC,WAAW,GAAIC,QAAwC,IAAI;EACtE,IAAI5B,OAAO,GAAG,KAAK;EACnB,MAAMC,KAAK,GAAG,IAAIjB,eAAe,EAAE;EACnC,MAAMkB,cAAc,GAAGA,CAAA,KAAK;IAC1B,MAAM2B,UAAU,GAAG5B,KAAK,CAACf,OAAO;IAChCe,KAAK,CAACf,OAAO,GAAG,EAAE;IAClB,KAAK,MAAM,CAACkB,CAAC,EAAEC,KAAK,CAAC,IAAIwB,UAAU,EAAE;MACnC,KAAK,IAAIjC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGS,KAAK,CAACZ,MAAM,EAAEG,CAAC,EAAE,EAAE;QACrCS,KAAK,CAACT,CAAC,CAAC,EAAE;;;IAGd,IAAIK,KAAK,CAACf,OAAO,CAACO,MAAM,KAAK,CAAC,EAAE;MAC9BO,OAAO,GAAG,KAAK;KAChB,MAAM;MACLM,MAAM,EAAE;;EAEZ,CAAC;EAED,MAAMA,MAAM,GAAGA,CAAA,KAAMsB,QAAQ,CAAC1B,cAAc,CAAC;EAE7C,OAAOwB,IAAI,CAAC,CAACtC,IAAI,EAAEC,QAAQ,KAAI;IAC7BY,KAAK,CAACd,YAAY,CAACC,IAAI,EAAEC,QAAQ,CAAC;IAClC,IAAI,CAACW,OAAO,EAAE;MACZA,OAAO,GAAG,IAAI;MACdM,MAAM,EAAE;;EAEZ,CAAC,CAAC;AACJ,CAAC;AAED;;;;AAAAT,OAAA,CAAA8B,WAAA,GAAAA,WAAA;AAIO,MAAMG,KAAK,GAAIC,EAAU,IAAKL,IAAI,CAAEtC,IAAI,IAAKmB,UAAU,CAACnB,IAAI,EAAE2C,EAAE,CAAC,CAAC;AAEzE;;;;AAAAlC,OAAA,CAAAiC,KAAA,GAAAA,KAAA;AAIO,MAAME,YAAY,GAAID,EAAU,IAAKJ,WAAW,CAAEvC,IAAI,IAAKmB,UAAU,CAACnB,IAAI,EAAE2C,EAAE,CAAC,CAAC;AAAAlC,OAAA,CAAAmC,YAAA,GAAAA,YAAA"}