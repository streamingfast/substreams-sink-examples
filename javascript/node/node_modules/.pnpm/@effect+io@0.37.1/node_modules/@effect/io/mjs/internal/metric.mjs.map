{"version":3,"file":"metric.mjs","names":["Duration","constVoid","dual","identity","globalValue","HashSet","pipeArguments","ReadonlyArray","Clock","Cause","core","_effect","metricBoundaries","metricKey","metricLabel","metricRegistry","MetricSymbolKey","MetricTypeId","Symbol","for","metricVariance","_Type","_","_In","_Out","globalMetricRegistry","make","keyType","unsafeUpdate","unsafeValue","metric","Object","assign","effect","tap","a","sync","empty","pipe","arguments","mapInput","self","f","input","extraTags","counter","name","description","fromMetricKey","frequency","withConstantInput","key","hook","fullKey","taggedWithLabelSet","get","update","gauge","histogram","boundaries","increment","incrementBy","amount","map","mapType","set","value","succeed","out","evaluate","summary","options","withNow","summaryTimestamp","tagged","taggedWithLabels","taggedWithLabelsInput","union","fromIterable","extraTagsIterable","isHashSet","extraTags1","timer","exponential","start","factor","count","base","toMillis","timerWithBoundaries","fromChunk","trackAll","matchCauseEffect","onFailure","cause","failCause","onSuccess","trackDefect","trackDefectWith","updater","defect","tapDefect","forEach","defects","trackDuration","trackDurationWith","clockWith","clock","startTime","unsafeCurrentTimeNanos","endTime","duration","nanos","trackError","trackErrorWith","error","tapError","trackSuccess","trackSuccessWith","fiberRefGetWith","currentMetricLabels","tags","Date","now","zip","that","l","r","unsafeSnapshot","snapshot"],"sources":["../../src/internal/metric.ts"],"sourcesContent":[null],"mappings":"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"}