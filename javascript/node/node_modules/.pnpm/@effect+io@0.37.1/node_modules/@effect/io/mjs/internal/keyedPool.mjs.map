{"version":3,"file":"keyedPool.mjs","names":["Duration","Equal","dual","Hash","HashMap","MutableRef","Option","pipeArguments","core","fiberRuntime","pool","KeyedPoolSymbolKey","KeyedPoolTypeId","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","constructor","getOrCreatePool","activePools","_a","get","key","flatMap","invalidate","item","forEachSequentialDiscard","pipe","arguments","Complete","_tag","_b","symbol","combine","hash","string","u","isComplete","equals","Pending","deferred","_c","isPending","makeImpl","min","max","timeToLive","map","context","fiberId","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","has","update","set","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","succeed","deferredAwait","forEachSequential","Array","from","values","all","sync","make","empty","scopeMake","options","size","none","makeWith","decode","some","makeWithTTLBy","self"],"sources":["../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}