{"version":3,"file":"supervisor.js","names":["MutableRef","_interopRequireWildcard","require","SortedSet","core","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","SupervisorSymbolKey","SupervisorTypeId","Symbol","for","exports","supervisorVariance","_T","_","ProxySupervisor","constructor","underlying","value0","_a","value","onStart","context","effect","parent","fiber","onEnd","onEffect","onSuspend","onResume","map","f","zip","right","Zip","onRun","execution","left","_b","Track","_c","fibers","Set","sync","Array","from","_context","_effect","_parent","add","_value","delete","_fiber","Const","_d","FibersIn","ref","_e","remove","unsafeTrack","track","fromEffect","none","unit","fibersIn"],"sources":["../src/internal/supervisor.ts"],"sourcesContent":[null],"mappings":"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"}