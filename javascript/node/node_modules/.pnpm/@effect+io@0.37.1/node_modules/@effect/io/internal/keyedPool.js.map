{"version":3,"file":"keyedPool.js","names":["Duration","_interopRequireWildcard","require","Equal","_Function","Hash","HashMap","MutableRef","Option","_Pipeable","core","fiberRuntime","pool","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","KeyedPoolSymbolKey","KeyedPoolTypeId","Symbol","for","exports","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","constructor","getOrCreatePool","activePools","_a","flatMap","invalidate","item","forEachSequentialDiscard","pipe","pipeArguments","arguments","Complete","_tag","_b","symbol","combine","hash","string","u","isComplete","equals","Pending","deferred","_c","isPending","makeImpl","min","max","timeToLive","map","context","fiberId","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","update","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","succeed","deferredAwait","forEachSequential","Array","from","values","all","sync","make","empty","scopeMake","options","size","none","makeWith","decode","some","makeWithTTLBy","dual","self"],"sources":["../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}